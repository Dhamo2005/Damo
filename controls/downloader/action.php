<?php include_once("../../db.php"); include_once("../../controls/numfunctions.php");$value=mysqli_real_escape_string($GLOBALS['con'], base64_decode(base64_decode($_POST['likeid'])));$action=mysqli_real_escape_string($GLOBALS['con'], $_POST['action']);if($action==1){like($value);}elseif($action==0){dislike($value);}function like($value){ $sql="UPDATE Materials SET likes=likes + 1 WHERE id=$value"; if($GLOBALS['con']->query($sql)){ $sql_fetch="SELECT likes,std FROM Materials WHERE id=$value"; $row=mysqli_fetch_assoc($GLOBALS['con']->query($sql_fetch)); echo '{"likes":"'.$row['likes'].'","numshortlikes":"'.number_shorten($row['likes']).'"}';}}function dislike($value){ $sql="UPDATE Materials SET dislikes=dislikes + 1 WHERE id=$value"; if($GLOBALS['con']->query($sql)){ $sql_fetch="SELECT dislikes FROM Materials WHERE id=$value"; $row=mysqli_fetch_assoc($GLOBALS['con']->query($sql_fetch)); echo '{"dislikes":"'.$row['dislikes'].'","numshortdislikes":"'.number_shorten($row['dislikes']).'"}';}}